diff -Naur blankon-installer-1.33/scripts/b-i-secure-post-install blankon-installer-secure23/scripts/b-i-secure-post-install
--- blankon-installer-1.33/scripts/b-i-secure-post-install	2016-09-08 21:41:42.000000000 +0700
+++ blankon-installer-secure23/scripts/b-i-secure-post-install	2016-10-06 12:29:36.000000000 +0700
@@ -53,6 +53,8 @@
 #/usr/bin/chfn < $ROOTFS/tmp/user-info
 echo "root:$ROOTPASSWORD" | /usr/sbin/chpasswd root
 
+/usr/sbin/deluser $USERNAME sudo
+
 # Disable nopasswd
 sed -i -r -e "/%sudo/c\%sudo ALL=(ALL:ALL) ALL" /etc/sudoers
 # Delete the random user
@@ -61,8 +63,11 @@
 ###### CUSTOM GROUP
 if [ -n "$BI_CUSTOM_GROUPS" ];then
   for i in $BI_CUSTOM_GROUPS;do
-    do_chroot /usr/sbin/groupadd -r $i
-    do_chroot /usr/sbin/adduser $USERNAME $i
+    # Exclude sudo
+    if [ ! "x$i" = "xsudo" ];then
+      do_chroot /usr/sbin/groupadd -r $i
+      do_chroot /usr/sbin/adduser $USERNAME $i
+    fi
   done
 fi
 
diff -Naur blankon-installer-1.33/scripts/b-i-setup-fs blankon-installer-secure23/scripts/b-i-setup-fs
--- blankon-installer-1.33/scripts/b-i-setup-fs	2016-09-08 21:41:42.000000000 +0700
+++ blankon-installer-secure23/scripts/b-i-setup-fs	2016-10-06 12:29:36.000000000 +0700
@@ -270,6 +270,7 @@
     cp $ROOTFS/tmp/user-pass $ROOTFS/target/postinstall/
     cp $ROOTFS/tmp/root-pass $ROOTFS/target/postinstall/
     cp $ROOTFS/tmp/user-setup $ROOTFS/target/postinstall/
+    cp $ROOTFS/tmp/language $ROOTFS/target/postinstall/
 else
     ###### Remove them
     rm -f $ROOTFS/tmp/hostname
diff -Naur blankon-installer-1.33/scripts/blankon-session-try-installer blankon-installer-secure23/scripts/blankon-session-try-installer
--- blankon-installer-1.33/scripts/blankon-session-try-installer	2016-09-08 21:41:42.000000000 +0700
+++ blankon-installer-secure23/scripts/blankon-session-try-installer	2016-10-06 12:29:36.000000000 +0700
@@ -29,7 +29,9 @@
         # If this file exists, then system just rebooted from an installation attempt
         # SECURE_POST_INSTALL envar will continue the installation step
         export SECURE_POST_INSTALL=1		
-        sudo -E bash -c 'echo $SECURE_POST_INSTALL' 
+        sudo -E bash -c 'echo $SECURE_POST_INSTALL'
+        export LANG_BI=`cat /postinstall/language` 
+        sudo -E bash -c 'echo $LANG_BI' 
     fi
     
     # Check for BIFT instance
diff -Naur blankon-installer-1.33/src/installer.vala blankon-installer-secure23/src/installer.vala
--- blankon-installer-1.33/src/installer.vala	2016-09-08 21:41:42.000000000 +0700
+++ blankon-installer-secure23/src/installer.vala	2016-10-06 12:29:36.000000000 +0700
@@ -651,6 +651,10 @@
         content = ("%s\n").printf(timezone);
         Log.instance().log("/tmp/timezone : " + content);
         Utils.write_simple_file ("/tmp/timezone", content);
+        
+        content = ("%s\n").printf(language);
+        Log.instance().log("/tmp/language : " + content);
+        Utils.write_simple_file ("/tmp/language", content);
 
         SwapCollector.reset ();
         var swaps = "";
@@ -851,6 +855,20 @@
             JSCore.Value[] arguments,
             out JSCore.Value exception) {
 
+        var location = "/tmp/post-install.sh";
+        Utils.write_simple_file (location, "sudo /sbin/shutdown -t now\n");
+        Process.spawn_command_line_sync ("/bin/chmod a+x /tmp/post-install.sh");
+        Gtk.main_quit();
+
+        return new JSCore.Value.undefined (ctx);
+    }
+    
+    public static JSCore.Value js_exit (Context ctx,
+            JSCore.Object function,
+            JSCore.Object thisObject,
+            JSCore.Value[] arguments,
+            out JSCore.Value exception) {
+
         Gtk.main_quit();
 
         return new JSCore.Value.undefined (ctx);
@@ -862,10 +880,7 @@
             JSCore.Value[] arguments,
             out JSCore.Value exception) {
 
-        var location = "/tmp/post-install.sh";
-        Utils.write_simple_file (location, "sudo /sbin/reboot\n");
-        Process.spawn_command_line_sync ("/bin/chmod a+x /tmp/post-install.sh");
-        Gtk.main_quit();
+        Process.spawn_command_line_sync ("/sbin/reboot");
 
         return new JSCore.Value.undefined (ctx);
     }
@@ -1175,6 +1190,17 @@
         return new JSCore.Value.string(ctx, new JSCore.String.with_utf8_c_string(retval));
     } 
     
+    public static JSCore.Value js_get_current_language (Context ctx,
+            JSCore.Object function,
+            JSCore.Object thisObject,
+            JSCore.Value[] arguments,
+            out JSCore.Value exception) {
+
+        string retval = "false";
+        string language = GLib.Environment.get_variable("LANG_BI");
+        return new JSCore.Value.string(ctx, new JSCore.String.with_utf8_c_string(language));
+    } 
+    
     public static JSCore.Value js_scenario (Context ctx,
             JSCore.Object function,
             JSCore.Object thisObject,
@@ -1187,6 +1213,7 @@
     } 
 
     static const JSCore.StaticFunction[] js_funcs = {
+        { "exit", js_exit, PropertyAttribute.ReadOnly },
         { "shutdown", js_shutdown, PropertyAttribute.ReadOnly },
         { "reboot", js_reboot, PropertyAttribute.ReadOnly },
         { "logout", js_logout, PropertyAttribute.ReadOnly },
@@ -1194,6 +1221,7 @@
         { "setLocale", js_set_locale, PropertyAttribute.ReadOnly },
         { "setTimezone", js_set_timezone, PropertyAttribute.ReadOnly },
         { "getLocaleList", js_get_locale_list, PropertyAttribute.ReadOnly },
+        { "getCurrentLanguage", js_get_current_language, PropertyAttribute.ReadOnly },
         { "getRelease", js_get_release, PropertyAttribute.ReadOnly },
         { "whichEfi", js_which_efi, PropertyAttribute.ReadOnly },
         { "isEfi", js_is_efi, PropertyAttribute.ReadOnly },
diff -Naur blankon-installer-1.33/system/html.min.js blankon-installer-secure23/system/html.min.js
--- blankon-installer-1.33/system/html.min.js	2016-09-08 21:41:42.000000000 +0700
+++ blankon-installer-secure23/system/html.min.js	2016-10-06 12:29:36.000000000 +0700
@@ -41,8 +41,8 @@
   module = angular.module('html', []);
 }
 module.run(['$templateCache', function($templateCache) {
-  $templateCache.put('summary/summary.html',
-    '<div class="row"><div class="columns content"><h1>{{\'installation_summary\' | translate}}</h1><p>{{\'install_summary_info\' | translate}}</p><p>{{\'target_device\' | translate}} : {{selectedDrive.model}}<br>{{\'target_partition\' | translate}} : {{selectedDrive.path}}{{installationData.partition}}<br>{{\'computer_name\' | translate}} : {{installationData.hostname}}<br>{{\'full_name\' | translate}} : {{installationData.fullname}}<br>{{\'username\' | translate}} : {{installationData.username}}<br>{{\'automatically_login\' | translate}} : <span ng-show="installationData.autologin">{{\'yes\' | translate}}</span><span ng-show="!installationData.autologin">{{\'no\' | translate}}</span></p></div><div class="columns nav-button"><button class="button" ng-click="previous()">{{\'previous\' | translate}}</button> <button class="button" ng-click="next()" ng-disabled="autofill">{{\'install\' | translate}}</button></div></div>');
+  $templateCache.put('partition/partition.html',
+    '<div class="row"><div class="columns content"><h1>{{\'install_partition\' | translate}} <small ng-show="advancedPartition">PartoEdi</small></h1><p ng-hide="devices[0]" class="fade">{{\'please_wait_system_scanned\' | translate}}</p><p ng-show="devices[0] && !advancedPartition" class="fade"><a class="button dropdown" dropdown-toggle="#drive-selection"><span ng-show="!selectedDrive">{{\'select_drive\' | translate}}</span><span ng-show="selectedDrive">{{selectedDrive.path}} - {{selectedDrive.model}}</span></a></p><p><ul id="drive-selection" class="f-dropdown"><li ng-repeat="drive in devices"><a ng-click="setDrive(drive)">{{drive.path}} - {{drive.model}}</a></li></ul><div ng-show="cleanInstall" class="fade"><p class="fade">{{\'clean_install_warning\' | translate}}</p><p><button ng-show="!(isEfi && currentPartitionTable!=\'gpt\')" class="button" ng-click="cleanInstall=false;">{{\'cancel_clean_install\' | translate}}</button></p></div><div ng-hide="advancedPartition || cleanInstall" class="fade"><p ng-show="selectedDrive" class="fade">{{\'please_choose_partition\' | translate}}<br></p><div class="top-bar-partition" style="width:{{selectedDrive.driveWidth}}px" ng-show="selectedDrive"><span class="legend-partition-normal">{{\'used\' | translate}}</span> <span class="legend-partition-disallow">{{\'too_small\' | translate}}</span> <span class="legend-partition-freespace">{{\'free_space\' | translate}}</span> <a class="button tiny right" ng-click="switchToAdvancedPartition()">{{\'enter_advanced_mode\' | translate}} <a class="button tiny right" ng-click="cleanInstall=true;">{{\'clean_install\' | translate}}</a></a></div><div class="drive-block fade" ng-show="selectedDrive" style="width:{{selectedDrive.driveWidth}}px !important;"><a href="" ng-repeat="partition in selectedDrive.partitionList" ng-hide="partition.hidden" class="partition-block" ng-click="selectInstallationTarget(partition)" ng-class="{selected:partition.selected, disallow:partition.disallow, freespace:partition.freespace, normal:partition.normal, extended:partition.extended}"><span class="pop fade" style="color:white">Size : {{partition.sizeGb}} GB<br>File System : {{partition.filesystem || "-"}}<br>{{partition.description}}</span><div style="width:{{partition.blockWidth}}px;"></div><div ng-class="{\'partition-block-separator\':partition.blockWidth > 5}"></div></a></div><div ng-show="validInstallationTarget"><br><p>{{\'you_are_choosing\' | translate}} {{selectedInstallationTarget}} {{\'to_be_installed_with\' | translate}}.<br><strong>{{\'warning\' | translate}} :</strong> {{\'the_selected_partition_will_be_wiped_out\' | translate}}</p></div></div><div ng-show="advancedPartition && !actionDialog" class="fade"><div class="top-bar-partition" style="width:{{selectedDrive.driveWidth}}px"><span ng-show="selectedDrive" class="legend-partition-primary">Primary</span> <span ng-show="selectedDrive" class="legend-partition-logical">Logical</span> <span ng-show="selectedDrive" class="legend-partition-freespace">Free space</span> <span ng-hide="exitAdvancedModeMessage || applyAdvancedModeMessage"><a class="button tiny right" ng-click="partitionApply()"><span>{{\'apply\' | translate}}</span></a> <a class="button tiny right" ng-click="redo()"><span>Redo</span></a> <a class="button tiny right" ng-click="undo()"><span>Undo</span></a> <a class="button tiny right" ng-click="switchToSimplePartitionWarning()"><span>{{\'exit_advanced_mode\' | translate}}</span></a></span></div><div class="drive-block" ng-show="selectedDrive" style="width:{{selectedDrive.driveWidth}}px !important;"><div ng-repeat="partition in selectedDrive.partitionList"><a href="" ng-hide="partition.hidden" class="partition-block" ng-class="{selected:(partition.selected || partition.highlighted), freespace:partition.freespace, primary:partition.normal, extended:partition.extended, logical:partition.logical}" ng-mouseover="highlight(partition)" ng-mouseleave="unhighlight(partition)"><div style="width:{{partition.blockWidth}}px;"></div><div ng-class="{\'partition-block-separator\':partition.blockWidth > 5}"></div></a></div></div><div ng-show="exitAdvancedModeMessage" class="fade"><p><br>{{\'are_you_sure_exit_advanced_mode\' | translate}}<br>{{\'if_yes_any_step_will_be\' | translate}}</p><button class="button" ng-click="hidePartoEdiMessage()">{{\'no\' | translate}}</button> <button class="button" ng-click="switchToSimplePartition()">{{\'yes\' | translate}}</button></div><div ng-show="applyAdvancedModeMessage" class="fade"><p><br>{{\'should_one_partition_as_root\' | translate}}</p><button class="button" ng-click="hidePartoEdiMessage()">OK</button></div><table style="margin-top:10px;width:{{selectedDrive.driveWidth}}px" ng-hide="exitAdvancedModeMessage || applyAdvancedModeMessage"><tr><td>{{\'partition\' | translate}}</td><td>{{\'file_system\' | translate}}</td><td>{{\'mount_point\' | translate}}</td><td>{{\'size\' | translate}}</td><td width="100"></td></tr><tr ng-repeat="partition in selectedDrive.partitionList" ng-hide="partition.hidden" ng-class="{highlight:partition.highlighted}" ng-mouseover="highlight(partition)" ng-mouseleave="unhighlight(partition)"><td class="td-partition"><span ng-show="partition.logical || partition.logicalFreespace">&nbsp;&nbsp;&nbsp;</span> <span ng-show="partition.id > 0 && !partition.new">{{selectedDrive.path}}{{partition.id}}</span> <span ng-show="partition.new">{{\'new_partition\' | translate}}</span> <span ng-show="partition.id < 0 && !partition.new">{{\'unallocated\' | translate}}</span></td><td class="td-partition"><span ng-show="partition.id > 0 && !partition.format">{{partition.filesystem}}</span> <span ng-show="partition.extended">Extended</span> <span class="td-partition" ng-show="(partition.id > 0 || partition.new) && partition.format && partition.mountPoint != \'swap\'">{{\'format_as_ext4\' | translate}}</span> <span class="td-partition" ng-show="partition.mountPoint == \'swap\'">Linux swap</span> <span class="td-partition" ng-show="partition.id < 0 && !partition.new">-</span></td><td class="td-partition"><span ng-hide="partition.extended">{{partition.mountPoint || \'-\'}}</span></td><td class="td-partition"><span ng-hide="partition.extended">{{partition.sizeGb}} GB</span></td><td class="td-partition" ng-show="partition.freespace && !partition.extended"><a class="button tiny partoedi-button" ng-click="partitionCreate(partition)"><span>{{\'create\' | translate}}</span></a></td><td class="td-partition" ng-show="!partition.hasChild && partition.extended && !partition.new"><a class="button tiny partoedi-button" ng-click="partitionDelete(partition)"><span>{{\'delete\' | translate}}</span></a></td><td class="td-partition" ng-show="partition.id > 0 && !partition.new && !partition.format && !partition.extended && !partition.mountPoint"><a class="button tiny dropdown partoedi-button" dropdown-toggle="#action-{{partition.start}}" ng-hide="partition.extended"><span>{{\'action\' | translate}}</span></a><ul id="action-{{partition.start}}" class="f-dropdown" ng-show="partition.id > 0"><li><a ng-click="partitionDelete(partition)">{{\'delete\' | translate}}</a></li><li><a ng-click="partitionFormat(partition)">Format</a></li><li ng-show="(partition.filesystem == \'ext3\' || partition.filesystem == \'ext4\' || partition.filesystem == \'xfs\') && !partitionState.mountPoint.home"><a ng-click="partitionMountAsHome(partition)">{{\'use_as_home\' | translate}}</a></li></ul></td></tr></table></div><div ng-show="formatDialog" class="fade"><h2>{{\'format_partition\' | translate}}</h2><p>{{formatDialogSelected.sizeGbOrigin}} GB size ({{formatDialogSelected.start}} - {{formatDialogSelected.end}})</p><div class="partoedi-action-dialog-form"><div class="row small-8"><div class="small-4 columns"><label class="right inline">{{\'mount_point\' | translate}}</label></div><div class="small-8 columns"><select ng-model="formatDialogSelected.mountPoint"><option value="-" selected="">Without mount point</option><option ng-hide="partitionState.mountPoint.root" value="/">/</option><option ng-hide="partitionState.mountPoint.home" value="/home">/home</option><option value="swap">{{\'use_as_swap\' | translate}}</option></select></div></div><div><p ng-show="formatDialogSelected.mountPoint==\'-\' || formatDialogSelected.mountPoint==\'/\' || formatDialogSelected.mountPoint==\'/home\'">{{\'will_be_ext4\' | translate}}</p><p ng-show="formatDialogSelected.mountPoint==\'swap\'">{{\'will_be_swap\' | translate}}</p></div></div><div><button class="button" ng-click="partitionFormatCancel()">{{\'cancel\' | translate}}</button> <button class="button" ng-click="partitionFormatApply(formatDialogSelected)">{{\'apply\' | translate}}</button></div></div><div ng-show="createDialog" class="fade"><p>{{createDialogSelected.sizeGbOrigin}} GB available ({{createDialogSelected.start}} - {{createDialogSelected.end}})</p><div style="height:50px"><div id="bar-container"><div id="bar"><div id="slider"></div></div></div></div><div class="partoedi-action-dialog-form"><div class="row small-8"><div class="small-4 columns"><label class="right inline">{{\'new_size\' | translate}} (GB)</label></div><div class="small-8 columns"><input type="text" ng-model="createDialogSelected.sizeGb" debounce="500"></div></div><div class="row small-8"><div class="small-4 columns">&nbsp;</div><div class="small-4 columns">Before<br><input type="text" ng-model="createDialogSelected.sizeGbBefore" debounce="500"></div><div class="small-4 columns">After<br><input type="text" ng-model="createDialogSelected.sizeGbAfter" debounce="500"></div></div><div class="row small-8" ng-hide="createDialogSelected.logicalFreespace"><div class="small-4 columns"><label class="right inline">{{\'partition_type\' | translate}}</label></div><div class="small-8 columns"><select ng-model="createDialogSelected.type"><option value="DEVICE_PARTITION_TYPE_NORMAL">Primary</option><option value="DEVICE_PARTITION_TYPE_EXTENDED">Extended</option></select></div></div><div class="row small-8" ng-show="createDialogSelected.type==\'DEVICE_PARTITION_TYPE_NORMAL\' || createDialogSelected.logicalFreespace"><div class="small-4 columns"><label class="right inline">Mount point</label></div><div class="small-8 columns"><select ng-model="createDialogSelected.mountPoint"><option value="-" selected="">Without mount point</option><option ng-hide="partitionState.mountPoint.root" value="/">/</option><option ng-hide="partitionState.mountPoint.home" value="/home">/home</option><option value="swap">use as Swap</option></select></div></div><div class="row small-8" ng-show="createDialogSelected.type==\'DEVICE_PARTITION_TYPE_NORMAL\' || createDialogSelected.logicalFreespace"><div class="small-4 columns"><label class="right inline">&nbsp;</label></div><div class="small-8 columns"><p ng-show="(createDialogSelected.mountPoint==\'-\' || createDialogSelected.mountPoint==\'/\' || createDialogSelected.mountPoint==\'/home\') && createDialogSelected.type==\'DEVICE_PARTITION_TYPE_NORMAL\'">This will be formatted as ext4 filesystem.</p><p ng-show="createDialogSelected.mountPoint==\'swap\'">This will be formatted as swap filesystem.</p></div></div><div class="row small-8"><div class="small-4 columns"><label class="right inline">&nbsp;</label></div><div class="small-8 columns"><button class="button" ng-click="partitionCreateCancel()">{{\'cancel\' | translate}}</button> <button class="button" ng-click="partitionCreateApply(createDialogSelected)">{{\'create_partition\' | translate}}</button></div></div></div></div></p></div><div class="columns nav-button" ng-show="devices[0] && !actionDialog && !advancedPartition"><button class="button" ng-click="previous()">{{\'previous\' | translate}}</button> <button class="button" ng-class="{disabled:(!validInstallationTarget && !cleanInstall)}" ng-click="partitionSimpleNext()">{{\'next\' | translate}}</button></div></div>');
 }]);
 })();
 
@@ -53,8 +53,8 @@
   module = angular.module('html', []);
 }
 module.run(['$templateCache', function($templateCache) {
-  $templateCache.put('partition/partition.html',
-    '<div class="row"><div class="columns content"><h1>{{\'install_partition\' | translate}} <small ng-show="advancedPartition">PartoEdi</small></h1><p ng-hide="devices[0]" class="fade">{{\'please_wait_system_scanned\' | translate}}</p><p ng-show="devices[0] && !advancedPartition" class="fade"><a class="button dropdown" dropdown-toggle="#drive-selection"><span ng-show="!selectedDrive">{{\'select_drive\' | translate}}</span><span ng-show="selectedDrive">{{selectedDrive.path}} - {{selectedDrive.model}}</span></a></p><p><ul id="drive-selection" class="f-dropdown"><li ng-repeat="drive in devices"><a ng-click="setDrive(drive)">{{drive.path}} - {{drive.model}}</a></li></ul><div ng-show="cleanInstall" class="fade"><p class="fade">{{\'clean_install_warning\' | translate}}</p><p><button ng-show="!(isEfi && currentPartitionTable!=\'gpt\')" class="button" ng-click="cleanInstall=false;">{{\'cancel_clean_install\' | translate}}</button></p></div><div ng-hide="advancedPartition || cleanInstall" class="fade"><p ng-show="selectedDrive" class="fade">{{\'please_choose_partition\' | translate}}<br></p><div class="top-bar-partition" style="width:{{selectedDrive.driveWidth}}px" ng-show="selectedDrive"><span class="legend-partition-normal">{{\'used\' | translate}}</span> <span class="legend-partition-disallow">{{\'too_small\' | translate}}</span> <span class="legend-partition-freespace">{{\'free_space\' | translate}}</span> <a class="button tiny right" ng-click="switchToAdvancedPartition()">{{\'enter_advanced_mode\' | translate}} <a class="button tiny right" ng-click="cleanInstall=true;">{{\'clean_install\' | translate}}</a></a></div><div class="drive-block fade" ng-show="selectedDrive" style="width:{{selectedDrive.driveWidth}}px !important;"><a href="" ng-repeat="partition in selectedDrive.partitionList" ng-hide="partition.hidden" class="partition-block" ng-click="selectInstallationTarget(partition)" ng-class="{selected:partition.selected, disallow:partition.disallow, freespace:partition.freespace, normal:partition.normal, extended:partition.extended}"><span class="pop fade" style="color:white">Size : {{partition.sizeGb}} GB<br>File System : {{partition.filesystem || "-"}}<br>{{partition.description}}</span><div style="width:{{partition.blockWidth}}px;"></div><div ng-class="{\'partition-block-separator\':partition.blockWidth > 5}"></div></a></div><div ng-show="validInstallationTarget"><br><p>{{\'you_are_choosing\' | translate}} {{selectedInstallationTarget}} {{\'to_be_installed_with\' | translate}}.<br><strong>{{\'warning\' | translate}} :</strong> {{\'the_selected_partition_will_be_wiped_out\' | translate}}</p></div></div><div ng-show="advancedPartition && !actionDialog" class="fade"><div class="top-bar-partition" style="width:{{selectedDrive.driveWidth}}px"><span ng-show="selectedDrive" class="legend-partition-primary">Primary</span> <span ng-show="selectedDrive" class="legend-partition-logical">Logical</span> <span ng-show="selectedDrive" class="legend-partition-freespace">Free space</span> <span ng-hide="exitAdvancedModeMessage || applyAdvancedModeMessage"><a class="button tiny right" ng-click="partitionApply()"><span>{{\'apply\' | translate}}</span></a> <a class="button tiny right" ng-click="redo()"><span>Redo</span></a> <a class="button tiny right" ng-click="undo()"><span>Undo</span></a> <a class="button tiny right" ng-click="switchToSimplePartitionWarning()"><span>{{\'exit_advanced_mode\' | translate}}</span></a></span></div><div class="drive-block" ng-show="selectedDrive" style="width:{{selectedDrive.driveWidth}}px !important;"><div ng-repeat="partition in selectedDrive.partitionList"><a href="" ng-hide="partition.hidden" class="partition-block" ng-class="{selected:(partition.selected || partition.highlighted), freespace:partition.freespace, primary:partition.normal, extended:partition.extended, logical:partition.logical}" ng-mouseover="highlight(partition)" ng-mouseleave="unhighlight(partition)"><div style="width:{{partition.blockWidth}}px;"></div><div ng-class="{\'partition-block-separator\':partition.blockWidth > 5}"></div></a></div></div><div ng-show="exitAdvancedModeMessage" class="fade"><p><br>{{\'are_you_sure_exit_advanced_mode\' | translate}}<br>{{\'if_yes_any_step_will_be\' | translate}}</p><button class="button" ng-click="hidePartoEdiMessage()">{{\'no\' | translate}}</button> <button class="button" ng-click="switchToSimplePartition()">{{\'yes\' | translate}}</button></div><div ng-show="applyAdvancedModeMessage" class="fade"><p><br>{{\'should_one_partition_as_root\' | translate}}</p><button class="button" ng-click="hidePartoEdiMessage()">OK</button></div><table style="margin-top:10px;width:{{selectedDrive.driveWidth}}px" ng-hide="exitAdvancedModeMessage || applyAdvancedModeMessage"><tr><td>{{\'partition\' | translate}}</td><td>{{\'file_system\' | translate}}</td><td>{{\'mount_point\' | translate}}</td><td>{{\'size\' | translate}}</td><td width="100"></td></tr><tr ng-repeat="partition in selectedDrive.partitionList" ng-hide="partition.hidden" ng-class="{highlight:partition.highlighted}" ng-mouseover="highlight(partition)" ng-mouseleave="unhighlight(partition)"><td class="td-partition"><span ng-show="partition.logical || partition.logicalFreespace">&nbsp;&nbsp;&nbsp;</span> <span ng-show="partition.id > 0 && !partition.new">{{selectedDrive.path}}{{partition.id}}</span> <span ng-show="partition.new">{{\'new_partition\' | translate}}</span> <span ng-show="partition.id < 0 && !partition.new">{{\'unallocated\' | translate}}</span></td><td class="td-partition"><span ng-show="partition.id > 0 && !partition.format">{{partition.filesystem}}</span> <span ng-show="partition.extended">Extended</span> <span class="td-partition" ng-show="(partition.id > 0 || partition.new) && partition.format && partition.mountPoint != \'swap\'">{{\'format_as_ext4\' | translate}}</span> <span class="td-partition" ng-show="partition.mountPoint == \'swap\'">Linux swap</span> <span class="td-partition" ng-show="partition.id < 0 && !partition.new">-</span></td><td class="td-partition"><span ng-hide="partition.extended">{{partition.mountPoint || \'-\'}}</span></td><td class="td-partition"><span ng-hide="partition.extended">{{partition.sizeGb}} GB</span></td><td class="td-partition" ng-show="partition.freespace && !partition.extended"><a class="button tiny partoedi-button" ng-click="partitionCreate(partition)"><span>{{\'create\' | translate}}</span></a></td><td class="td-partition" ng-show="!partition.hasChild && partition.extended && !partition.new"><a class="button tiny partoedi-button" ng-click="partitionDelete(partition)"><span>{{\'delete\' | translate}}</span></a></td><td class="td-partition" ng-show="partition.id > 0 && !partition.new && !partition.format && !partition.extended && !partition.mountPoint"><a class="button tiny dropdown partoedi-button" dropdown-toggle="#action-{{partition.start}}" ng-hide="partition.extended"><span>{{\'action\' | translate}}</span></a><ul id="action-{{partition.start}}" class="f-dropdown" ng-show="partition.id > 0"><li><a ng-click="partitionDelete(partition)">{{\'delete\' | translate}}</a></li><li><a ng-click="partitionFormat(partition)">Format</a></li><li ng-show="(partition.filesystem == \'ext3\' || partition.filesystem == \'ext4\' || partition.filesystem == \'xfs\') && !partitionState.mountPoint.home"><a ng-click="partitionMountAsHome(partition)">{{\'use_as_home\' | translate}}</a></li></ul></td></tr></table></div><div ng-show="formatDialog" class="fade"><h2>{{\'format_partition\' | translate}}</h2><p>{{formatDialogSelected.sizeGbOrigin}} GB size ({{formatDialogSelected.start}} - {{formatDialogSelected.end}})</p><div class="partoedi-action-dialog-form"><div class="row small-8"><div class="small-4 columns"><label class="right inline">{{\'mount_point\' | translate}}</label></div><div class="small-8 columns"><select ng-model="formatDialogSelected.mountPoint"><option value="-" selected="">Without mount point</option><option ng-hide="partitionState.mountPoint.root" value="/">/</option><option ng-hide="partitionState.mountPoint.home" value="/home">/home</option><option value="swap">{{\'use_as_swap\' | translate}}</option></select></div></div><div><p ng-show="formatDialogSelected.mountPoint==\'-\' || formatDialogSelected.mountPoint==\'/\' || formatDialogSelected.mountPoint==\'/home\'">{{\'will_be_ext4\' | translate}}</p><p ng-show="formatDialogSelected.mountPoint==\'swap\'">{{\'will_be_swap\' | translate}}</p></div></div><div><button class="button" ng-click="partitionFormatCancel()">{{\'cancel\' | translate}}</button> <button class="button" ng-click="partitionFormatApply(formatDialogSelected)">{{\'apply\' | translate}}</button></div></div><div ng-show="createDialog" class="fade"><p>{{createDialogSelected.sizeGbOrigin}} GB available ({{createDialogSelected.start}} - {{createDialogSelected.end}})</p><div style="height:50px"><div id="bar-container"><div id="bar"><div id="slider"></div></div></div></div><div class="partoedi-action-dialog-form"><div class="row small-8"><div class="small-4 columns"><label class="right inline">{{\'new_size\' | translate}} (GB)</label></div><div class="small-8 columns"><input type="text" ng-model="createDialogSelected.sizeGb" debounce="500"></div></div><div class="row small-8"><div class="small-4 columns">&nbsp;</div><div class="small-4 columns">Before<br><input type="text" ng-model="createDialogSelected.sizeGbBefore" debounce="500"></div><div class="small-4 columns">After<br><input type="text" ng-model="createDialogSelected.sizeGbAfter" debounce="500"></div></div><div class="row small-8" ng-hide="createDialogSelected.logicalFreespace"><div class="small-4 columns"><label class="right inline">{{\'partition_type\' | translate}}</label></div><div class="small-8 columns"><select ng-model="createDialogSelected.type"><option value="DEVICE_PARTITION_TYPE_NORMAL">Primary</option><option value="DEVICE_PARTITION_TYPE_EXTENDED">Extended</option></select></div></div><div class="row small-8" ng-show="createDialogSelected.type==\'DEVICE_PARTITION_TYPE_NORMAL\' || createDialogSelected.logicalFreespace"><div class="small-4 columns"><label class="right inline">Mount point</label></div><div class="small-8 columns"><select ng-model="createDialogSelected.mountPoint"><option value="-" selected="">Without mount point</option><option ng-hide="partitionState.mountPoint.root" value="/">/</option><option ng-hide="partitionState.mountPoint.home" value="/home">/home</option><option value="swap">use as Swap</option></select></div></div><div class="row small-8" ng-show="createDialogSelected.type==\'DEVICE_PARTITION_TYPE_NORMAL\' || createDialogSelected.logicalFreespace"><div class="small-4 columns"><label class="right inline">&nbsp;</label></div><div class="small-8 columns"><p ng-show="(createDialogSelected.mountPoint==\'-\' || createDialogSelected.mountPoint==\'/\' || createDialogSelected.mountPoint==\'/home\') && createDialogSelected.type==\'DEVICE_PARTITION_TYPE_NORMAL\'">This will be formatted as ext4 filesystem.</p><p ng-show="createDialogSelected.mountPoint==\'swap\'">This will be formatted as swap filesystem.</p></div></div><div class="row small-8"><div class="small-4 columns"><label class="right inline">&nbsp;</label></div><div class="small-8 columns"><button class="button" ng-click="partitionCreateCancel()">{{\'cancel\' | translate}}</button> <button class="button" ng-click="partitionCreateApply(createDialogSelected)">{{\'create_partition\' | translate}}</button></div></div></div></div></p></div><div class="columns nav-button" ng-show="devices[0] && !actionDialog && !advancedPartition"><button class="button" ng-click="previous()">{{\'previous\' | translate}}</button> <button class="button" ng-class="{disabled:(!validInstallationTarget && !cleanInstall)}" ng-click="partitionSimpleNext()">{{\'next\' | translate}}</button></div></div>');
+  $templateCache.put('summary/summary.html',
+    '<div class="row"><div class="columns content"><h1>{{\'installation_summary\' | translate}}</h1><p>{{\'install_summary_info\' | translate}}</p><p>{{\'target_device\' | translate}} : {{selectedDrive.model}}<br>{{\'target_partition\' | translate}} : {{selectedDrive.path}}{{installationData.partition}}<br>{{\'computer_name\' | translate}} : {{installationData.hostname}}<br>{{\'full_name\' | translate}} : {{installationData.fullname}}<br>{{\'username\' | translate}} : {{installationData.username}}<br>{{\'automatically_login\' | translate}} : <span ng-show="installationData.autologin">{{\'yes\' | translate}}</span><span ng-show="!installationData.autologin">{{\'no\' | translate}}</span></p></div><div class="columns nav-button"><button class="button" ng-click="previous()">{{\'previous\' | translate}}</button> <button class="button" ng-click="next()" ng-disabled="autofill">{{\'install\' | translate}}</button></div></div>');
 }]);
 })();
 
diff -Naur blankon-installer-1.33/system/src.js blankon-installer-secure23/system/src.js
--- blankon-installer-1.33/system/src.js	2016-09-08 21:41:42.000000000 +0700
+++ blankon-installer-secure23/system/src.js	2016-10-06 12:29:36.000000000 +0700
@@ -131,20 +131,6 @@
 
 }])
 
-angular.module("summary",[])
-.controller("SummaryCtrl", ["$scope", "$window", "$rootScope", 
-  function ($scope, $window, $rootScope){
-    
-    $(".content").css("height", $rootScope.contentHeight);
-    
-    if ($rootScope.autofill) {
-      setTimeout(function(){
-        $rootScope.next();
-      }, 1000)
-    }
-
-}])
-
 angular.module("partition",[])
 .controller("PartitionCtrl", ["$scope", "$window", "$timeout", "$rootScope", 
   function ($scope, $window, $timeout, $rootScope){
@@ -1118,6 +1104,20 @@
 
 ])
 
+angular.module("summary",[])
+.controller("SummaryCtrl", ["$scope", "$window", "$rootScope", 
+  function ($scope, $window, $rootScope){
+    
+    $(".content").css("height", $rootScope.contentHeight);
+    
+    if ($rootScope.autofill) {
+      setTimeout(function(){
+        $rootScope.next();
+      }, 1000)
+    }
+
+}])
+
 angular.module("timezone",[])
 .controller("TimezoneCtrl", ["$scope", "$window", "$rootScope", 
   function ($scope, $window, $rootScope, $watch){
@@ -1441,7 +1441,7 @@
       }, 100);
     }
     $rootScope.exit = function(){
-      Installation.shutdown();
+      Installation.exit();
     }
     $timeout(function(){
       console.log($(window).width());
